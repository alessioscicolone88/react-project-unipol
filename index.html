<html>
  <head>
    <script type="text/javascript" src="http://localhost:8000/core-remotes/tpdRemotesImporter/client/main.js"></script>
    <script src="http://localhost:8002/primary-remotes/tpdTestoImmagine/client/main.js"></script>
    
  </head>
  <body>

    <tpd-remotes-importer data-props="{}" data-mfe-type="core" data-mfe-name="tpdRemotesImporter" data-mfe-portlet-src="" data-mfe-portlet-unique-name="" data-mfe-portlet-title=""></tpd-remotes-importer>
    <tpd-testo-immagine id="tpd-testo-immagine" data-props='{
      "contentId": "9d820fdf-80aa-49a4-8e8f-aa2c87f4e08a",
      "type": "content",
      "siteAreaName": "",
      "menuName": "",
      "projectId": "f58ee174-553a-452b-a07c-d6e2b6044933",
      "isEditMode": false,
      "touchpoint": "",
      "colorClassDesktop": "green",
      "isUtileASapersi": "",
      "config": {
          "Immagine": {
              "id": "9d820fdf-80aa-49a4-8e8f-aa2c87f4e08a-Immagine",
              "parentId": "9d820fdf-80aa-49a4-8e8f-aa2c87f4e08a",
              "__mfeName__": "tpdImage",
              "type": "ReferenceComponent",
              "name": "Immagine",
              "value": {
                  "type": "application/vnd.ibm.wcm+xml",
                  "reference": "/mycontenthandler/!ut/p/digest!fG0nCQfXsxnY3X2iK4Qo8g/wcmrest/LibraryImageComponent/74f6f555-9ef6-48a1-a358-cd21026e66a6",
                  "image": {
                      "dimension": {
                          "height": "420",
                          "width": "550",
                          "border": ""
                      },
                      "altText": "",
                      "tagName": "",
                      "fileName": "Lifecycle_550x420_widget-testo_immagine_pagine-prodotto.jpg",
                      "resourceUri": {
                          "type": "image/jpeg",
                          "value": "https://www.unipolsai.it/wcm/myconnect/b138d24c-867f-4100-b7c9-fa2b92105a32/Lifecycle_550x420_widget-testo_immagine_pagine-prodotto.jpg?MOD=AJPERES&CACHEID=ROOTWORKSPACE-b138d24c-867f-4100-b7c9-fa2b92105a32-oH-s2Dg"
                      },
                      "renditionList": {}
                  }
              }
          },
          "Testo": {
              "id": "9d820fdf-80aa-49a4-8e8f-aa2c87f4e08a-Testo",
              "parentId": "9d820fdf-80aa-49a4-8e8f-aa2c87f4e08a",
              "__mfeName__": "richText",
              "type": "RichTextComponent",
              "name": "Testo",
              "value": {
                  "type": "text/html",
                  "value": "<p>Siamo al tuo fianco in tutte le fasi della vita </p>"
              }
          }
      }
    }' data-mfe-type="primary" data-mfe-name="tpdTestoImmagine" data-mfe-portlet-src="UnipolSai-Disegno-Area-Pubblica / Generic / PT_Testo_Immagine" data-mfe-portlet-unique-name="unipolSai.portlet.testoImmagine" data-mfe-portlet-title="Testo_Immagine"></tpd-testo-immagine>

   
<script type="text/javascript">

  async function fetchData() {
        try {
            const response = await fetch('http://localhost:8080/.rest/delivery/pages/unipol-home');
            const data = await response.json();
            setData(data)
        } catch (error) {
            console.error('errore', error);
        }
    }
   fetchData();

function setData(data) {
  const props = `{
      "contentId": "9d820fdf-80aa-49a4-8e8f-aa2c87f4e08a",
      "type": "content",
      "siteAreaName": "",
      "menuName": "",
      "projectId": "f58ee174-553a-452b-a07c-d6e2b6044933",
      "isEditMode": false,
      "touchpoint": "",
      "colorClassDesktop": "green",
      "isUtileASapersi": "",
      "config": {
          "Immagine": {
              "id": "9d820fdf-80aa-49a4-8e8f-aa2c87f4e08a-Immagine",
              "parentId": "9d820fdf-80aa-49a4-8e8f-aa2c87f4e08a",
              "__mfeName__": "tpdImage",
              "type": "ReferenceComponent",
              "name": "Immagine",
              "value": {
                  "type": "application/vnd.ibm.wcm+xml",
                  "reference": "/mycontenthandler/!ut/p/digest!fG0nCQfXsxnY3X2iK4Qo8g/wcmrest/LibraryImageComponent/74f6f555-9ef6-48a1-a358-cd21026e66a6",
                  "image": {
                      "dimension": {
                          "height": "420",
                          "width": "550",
                          "border": ""
                      },
                      "altText": "",
                      "tagName": "",
                      "fileName": "Lifecycle_550x420_widget-testo_immagine_pagine-prodotto.jpg",
                      "resourceUri": {
                          "type": "image/jpeg",
                          "value": "http://localhost:8080/dam${data.main['00'].Immagine["@path"]}"
                      },
                      "renditionList": {}
                  }
              }
          },
          "Testo": {
              "id": "9d820fdf-80aa-49a4-8e8f-aa2c87f4e08a-Testo",
              "parentId": "9d820fdf-80aa-49a4-8e8f-aa2c87f4e08a",
              "__mfeName__": "richText",
              "type": "RichTextComponent",
              "name": "Testo",
              "value": {
                  "type": "text/html",
                  "value": "${data.main['00'].Testo.replace(/(\r\n|\n|\r)/gm,"")}"
              }
          }
      }
    }`
  
      const element = document.getElementById("tpd-testo-immagine");
      element.setAttribute("data-props", props);
}

      
  
    </script>

  </body>
  
  
</html>